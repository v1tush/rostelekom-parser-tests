# Автоматизированное тестирование — Ростелеком (страница авторизации / регистрации)

**Краткое описание**
Проект содержит набор автоматизированных тестов для страницы авторизации/регистрации Ростелеком (URL:
`https://b2c.passport.rt.ru/...`). Цель — проверить ключевые сценарии авторизации и регистрации, оформить тест-кейсы и
найденные дефекты, предоставить инструкции для воспроизведения и запуска тестов на любом компьютере с Python3 и PyTest.

---

## Содержание README

1. Цель проекта
2. Что проверялось (область тестирования)
3. Инструменты и обоснование выбора
4. Структура репозитория
5. Как запустить тесты (локально)
6. Сводка тест-кейсов и покрытие
7. Применённые техники тест-дизайна (с примерами)
8. Найденные и предположительные дефекты
9. Ограничения и несделанные автотесты (почему)
10. Ссылки

---

## 1. Цель проекта

* Провести функциональное автоматизированное тестирование страницы входа и регистрации.
* Подготовить >=15 тест-кейсов и реализовать >=20 автотестов (PyTest + Selenium).
* Оформить найденные дефекты по шаблону: название, шаги, ожидаемый результат, фактический результат.
* Тесты фактически разделены на 2 части: часть тестов входа и тестов регистрации(11 и 9 штук соответственно), сделано это в связи с
  общим между этими страницами - аутентификация пользователя.
* Из-за упомянутых в 9 пункте проблем не удалось выполнить некоторые тесты, которые, возможно, были бы нужны. Тем не
  менее, приведенные тесты проверяют так же достаточно много пунктов.

## 2. Что проверялось

* Валидация полей логина/пароля (пустые поля, неверный формат e-mail/телефона).
* Поведение кнопки "Войти" при разных состояниях формы.
* Работа вкладок выбора способа входа (почта, телефон, логин, лицевой счёт).
* Отображение/скрытие пароля (иконка «глаз»).
* Работа ссылок: «Забыл пароль», «Зарегистрироваться», «Пользовательское соглашение», «Вернуться к авторизации».
* Валидация пароля при регистрации (требования: заглавная/строчная буква, цифра, спецсимвол, длина и т.д.).
* Поведение чекбокса "Запомнить меня".

## 3. Инструменты и обоснование выбора

* **Python 3.10+** — язык проекта (универсален, удобен для тестов).
* **pytest** — тест-раннер: простота организации тестов, параметризация, совместимость с CI.
* **Selenium WebDriver (Chrome)** — автоматизация браузера; выбран, потому что сайт — традиционный веб-интерфейс (
  JavaScript-heavy), нужен реальный браузер для проверки UI и динамических элементов.
* **webdriver-manager** (рекомендация) — упрощает установку/сопоставление chromedriver.
* **Google Sheets** — хранение тест-кейсов и дефектов (удобно для ревью ментора). Открыть доступ на комментирование.
* **Git / GitHub** — хранение кода/README/CI.
* **VS Code / PyCharm** — рекомендуемая среда разработки.

**Почему именно эти инструменты**

* PyTest + Selenium — стандартный стек для UI-тестирования, даёт гибкость для поиска элементов и работы с сайтом.
* Google Sheets — доступно и удобно для совместной проверки и комментирования тест-кейсов.

**Что им проверялось / что сделано**

* В Selenium реализованы автотесты для каждого тест-кейса: поиск элементов, ввод данных, клики, проверки
  состояний/сообщений об ошибке, ожидания (WebDriverWait).
* В README описаны шаги установки, запуска и ограничения (captcha, выбор города через БД).

## 4. Структура репозитория

```
rostelekom-parser-tests/          # корень репозитория
├─ login/                         # тестовые файлы (pytest)
│  ├─ tests
│  │   └─ test_login.py
│  └─ conftest.py                 # фикстуры (browser, reset_state)
├─ registration/
│  ├─ tests
│  │   └─ test_registration.py
│  └─ conftest.py
├─ requirements.txt               # selenium, pytest, webdriver-manager
└─ README.md                      # этот файл
```

## 5. Установка и запуск (локально)

**Требования:** Python 3.8+ (рекомендуется 3.10+), Google Chrome, подготовленный к работе Selenium, доступ в интернет (доступ к `b2c.passport.rt.ru`
возможен только из России).

1. Клонировать репозиторий:

```bash
git clone <your-repo-url>
cd rostelekom-parser-tests
```

2. Установить зависимости(делать в проекте с готовым library root .venv):

```bash
pip install -r requirements.txt
```

`requirements.txt` пример:

```
pytest
selenium
webdriver-manager
```

3. Запуск всех тестов:

```bash
pytest -v
```

4. Запуск конкретного файла:

Для тестов входа:

```bash
cd rostelekom-parser-tests
cd login
pytest -v tests/test_login.py
```

Для тестов регистрации:

```bash
cd rostelekom-parser-tests
cd registration
pytest -v tests/test_registration.py
```

5. Если хотите запускать без headless (видимый браузер), в conftest.py закомментируйте опцию `--headless`.

## 6. Сводка тест-кейсов и покрытие

* В репозитории приложена Google-таблица с тест-кейсами (20 кейсов). Таблица содержит: ID, Название, Шаги
  воспроизведения, Ожидаемый результат, Фактический результат, Статус.
* В коде реализовано 20 автотестов (включая параметризованные проверки валидации пароля и формата e-mail/телефона).

## 7. Применённые техники тест-дизайна

Минимум две техники использованы:

1. **Эквивалентное разбиение**

    * Примеры: корректный e-mail / некорректный e-mail; корректный телефон / некорректный телефон.
2. **Анализ граничных значений**

    * Примеры: длина пароля — 5, 201 символов (проверка минимальной и максимальной длины).
3. **Переходы состояний** — проверка переключения вкладок (phone/mail/login/ls) и перенаправления при вводе разных типов
   данных.

## 8. Найденные дефекты (реальные и потенциальные)

**Формат:** Название | Шаги | ОР | ФР

1. **TC-002 — BUG-001 — Вход с пустым паролем — кнопка активна, нет сообщения**

* Шаги: ввести логин, оставить пароль пустым, нажать Войти.
* ОР: кнопка заблокирована, появляется сообщение «Введите пароль».
* ФР: кнопка доступна, сообщение не появилось.

2. **TC-006 — BUG-002 — Вход без капчи — кнопка работает / ошибка появляется только после перезагрузки**

* Шаги: ввести логин/пароль, не вводить капчу, нажать Войти.
* ОР: кнопка заблокирована / отображение ошибки о капче.
* ФР: кнопка отправляет запрос, ошибка отображается лишь после перезагрузки.

3. **TC-010 — BUG-003 — Несоответствующее поведения цифровых полей**

* Шаги: ввод букв в поле телефона/лицевого счёта.
* ОР: поведение полей одинаковое/валидный клиентский контроль.
* ФР: в поле телефона допускаются буквы и происходит перенаправление; поле лицевого счёта ведёт себя иначе.

**Потенциальные дефекты (описаны, если реальных не хватило):**

* При регистрации нельзя просто ввести название региона, даже если оно в точности соответствует предложенному в таблице,
  нужно нажимать.
* Не баг, но тесты 16 и 17 провалились, т.к в идеале пароль должен содержать и цифру, и спецсимвол, а не одно из этого.

Все дефекты оформлены в Google-таблице: колонки `Название`, `Шаги`, `ОР`, `ФР`.

## 9. Ограничения и почему некоторые автотесты не реализованы

1. **Captcha (reCAPTCHA / защита от ботов)**

    * Регистрация на сайте защищена капчей, которая предотвращает автоматизированную регистрацию.
    * Автотесты, имитирующие полноценную регистрацию с подтверждением e-mail/телефона, **не могут быть надёжно
      автоматизированы без использования сторонних платных сервисов** (например, 2Captcha/twocaptcha) или специальных
      тестовых окружений от разработчиков. В проекте это отмечено и описано как ограничение.
2. **Выбор города и зависимость от БД**

    * На этапе регистрации выбор города подтягивается с базы данных (динамический список). Без доступа к тестовой БД с
      контролируемыми значениями корректно покрыть сценарии выбора города невозможно. (Кнопка открывает динамический
      блок, который рендерится через JavaScript и не позволяет корректно обработать HTML)
    * Вследствие этого тесты на выбор города и на полноценную регистрацию (с валидной выборкой региона) не реализованы.

## 10. Ссылки

* Google-таблица с тест-кейсами:
  `https://docs.google.com/spreadsheets/d/1Ai1vStMjPPGn_vBAth5xNLVb2OA1OD48qOsTVNFVItU/edit?usp=sharing` (откр. для
  комментирования)
* GitHub-репозиторий с автотестами: `https://github.com/v1tush/rostelekom-parser-tests`

---

---

### Примеры команд (сводка)

* `pip install -r requirements.txt`
* `pytest -v` — запуск полного набора тестов
* `pytest tests/test_login.py -q` — запуск только логина
